{
  "feature": "Add Zod Schema Validation",
  "description": "Replace manual validation in all tool servers with Zod schemas. Zod is already a dependency (v3.25+) but not used for runtime validation. Each server has repetitive validateXData() methods that manually check types.",
  "created_at": "2026-01-06T16:04:45.330Z",
  "updated_at": "2026-01-06T19:44:47.170Z",
  "status": "in_progress",
  "planStatus": "in_progress",
  "workflow_type": "development",
  "services_involved": [],
  "spec_file": "spec.md",
  "phases": [
    {
      "id": "phase-1",
      "name": "Create Zod Schema Foundation",
      "description": "Create centralized Zod schemas that match existing TypeScript interfaces",
      "subtasks": [
        {
          "id": "1.1",
          "title": "Create base schemas for common types",
          "description": "Create src/schemas/common.ts with reusable base schemas for common types like contribution types, stages, etc.",
          "status": "completed",
          "files": [
            "src/schemas/common.ts"
          ],
          "estimatedMinutes": 15,
          "notes": "Created src/schemas/common.ts with comprehensive reusable base schemas including:\n- Contribution types, argument types, variable types\n- All stage type schemas (collaborative reasoning, decision framework, metacognitive monitoring, scientific inquiry)\n- Visual element and operation type schemas  \n- Analysis types and specialized decision framework enums (Eisenhower, cost-benefit, door types, risk tolerance)\n- Knowledge level, claim status, hypothesis status enums\n- Common numeric constraints (confidence, probability, scores, weights)\n- Common string pattern schemas (non-empty strings, IDs, arrays)\nAll schemas match existing TypeScript interfaces from src/models/interfaces.ts",
          "updated_at": "2026-01-06T19:49:57.496005+00:00"
        },
        {
          "id": "1.2",
          "title": "Create schema for ThoughtData (trace tool)",
          "description": "Create Zod schema matching ThoughtData interface with required/optional fields validation",
          "status": "completed",
          "files": [
            "src/schemas/trace.ts"
          ],
          "estimatedMinutes": 10,
          "notes": "Created src/schemas/trace.ts with thoughtDataSchema matching ThoughtData interface. All required fields (thought, thoughtNumber, totalThoughts, nextThoughtNeeded) and optional fields (isRevision, revisesThought, branchFromThought, branchId, needsMoreThoughts) are properly validated. Uses common schemas for consistency (nonEmptyStringSchema, positiveNumberSchema, idSchema). Includes comprehensive documentation and type inference.",
          "updated_at": "2026-01-06T19:51:38.818060+00:00"
        },
        {
          "id": "1.3",
          "title": "Create schema for MentalModelData (model tool)",
          "description": "Create Zod schema matching MentalModelData interface",
          "status": "completed",
          "files": [
            "src/schemas/model.ts"
          ],
          "estimatedMinutes": 10,
          "notes": "Created src/schemas/model.ts with mentalModelDataSchema matching MentalModelData interface. All required fields (modelName, problem, steps, reasoning, conclusion) are properly validated using common schemas for consistency (nonEmptyStringSchema for strings, requiredStringArraySchema for the steps array). Includes comprehensive documentation and type inference. Follows the same pattern as trace.ts schema.",
          "updated_at": "2026-01-06T19:53:19.416895+00:00"
        },
        {
          "id": "1.4",
          "title": "Create schema for DebuggingApproachData (debug tool)",
          "description": "Create Zod schema matching DebuggingApproachData interface",
          "status": "completed",
          "files": [
            "src/schemas/debug.ts"
          ],
          "estimatedMinutes": 10,
          "notes": "Created src/schemas/debug.ts with debuggingApproachDataSchema matching DebuggingApproachData interface. All required fields (approachName, issue, steps, findings, resolution) are properly validated using common schemas for consistency (nonEmptyStringSchema for strings, requiredStringArraySchema for the steps array). Includes comprehensive documentation and type inference. Follows the same pattern as trace.ts and model.ts schemas.",
          "updated_at": "2026-01-06T19:54:42.212666+00:00"
        },
        {
          "id": "1.5",
          "title": "Create schema for DesignPatternData (pattern tool)",
          "description": "Create Zod schema matching DesignPatternData interface",
          "status": "completed",
          "files": [
            "src/schemas/pattern.ts"
          ],
          "estimatedMinutes": 10,
          "notes": "Created src/schemas/pattern.ts with designPatternDataSchema matching DesignPatternData interface. All required fields (patternName, context, implementation, benefits, tradeoffs) and optional fields (codeExample, languages) are properly validated using common schemas for consistency (nonEmptyStringSchema for strings, requiredStringArraySchema for required arrays, optionalStringArraySchema for optional arrays). Includes comprehensive documentation and type inference. Follows the same pattern as trace.ts, model.ts, and debug.ts schemas.",
          "updated_at": "2026-01-06T19:56:25.985381+00:00"
        },
        {
          "id": "1.6",
          "title": "Create schema for ProgrammingParadigmData (paradigm tool)",
          "description": "Create Zod schema matching ProgrammingParadigmData interface",
          "status": "completed",
          "files": [
            "src/schemas/paradigm.ts"
          ],
          "estimatedMinutes": 10,
          "notes": "Created src/schemas/paradigm.ts with programmingParadigmDataSchema matching ProgrammingParadigmData interface. All required fields (paradigmName, problem, approach, benefits, limitations) and optional fields (codeExample, languages) are properly validated using common schemas for consistency (nonEmptyStringSchema for strings, requiredStringArraySchema for required arrays, optionalStringArraySchema for optional arrays). Includes comprehensive documentation and type inference. Follows the same pattern as trace.ts, model.ts, debug.ts, and pattern.ts schemas.",
          "updated_at": "2026-01-06T19:57:55.089818+00:00"
        }
      ]
    },
    {
      "id": "phase-2",
      "name": "Create Complex Zod Schemas",
      "description": "Create schemas for more complex data structures with nested objects",
      "subtasks": [
        {
          "id": "2.1",
          "title": "Create schema for CollaborativeReasoningData (council tool)",
          "description": "Create Zod schemas for PersonaData, ContributionData, DisagreementData, and CollaborativeReasoningData",
          "status": "completed",
          "files": [
            "src/schemas/council.ts"
          ],
          "estimatedMinutes": 20,
          "notes": "Created src/schemas/council.ts with comprehensive Zod schemas for council tool:\n- PersonaData schema with all required fields (id, name, expertise, background, perspective, biases, communication) and optional fields (category, tags, concerns, typicalQuestions)\n- ContributionData schema with required fields (personaId, content, type, confidence) and optional referenceIds\n- DisagreementData schema with topic and nested positions array\n- CollaborativeReasoningData schema with all required fields (topic, personas, contributions, stage, activePersonaId, sessionId, iteration, nextContributionNeeded) and optional fields (nextPersonaId, consensusPoints, disagreements, keyInsights, openQuestions, finalRecommendation, suggestedContributionTypes)\nAll schemas use common schemas for consistency and include comprehensive documentation. Follows the same pattern as trace.ts, model.ts, debug.ts, pattern.ts, and paradigm.ts schemas.",
          "updated_at": "2026-01-06T19:59:45.889674+00:00"
        },
        {
          "id": "2.2",
          "title": "Create schema for DecisionFrameworkData (decide tool)",
          "description": "Create Zod schemas for all decision framework types: OptionData, CriterionData, EisenhowerClassification, CostBenefitAnalysis, RiskItem, ReversibilityData, RegretMinimizationData, and DecisionFrameworkData",
          "status": "completed",
          "files": [
            "src/schemas/decide.ts"
          ],
          "estimatedMinutes": 30,
          "notes": "Created src/schemas/decide.ts with comprehensive Zod schemas for decision framework tool:\n- OptionData schema with id, name, description\n- CriterionData schema with id, name, description, weight\n- OutcomeData schema with id, description, probability, value, optionId, confidenceInEstimate\n- EisenhowerClassification schema with optionId, urgency, importance, quadrant\n- CostBenefitItem schema with optionId, description, amount, type, optional category and timeframe\n- CostBenefitAnalysis schema with optionId, costs, benefits, netValue, and optional financial metrics (benefitCostRatio, roi, discountRate, timePeriodYears, npv)\n- RiskItem schema with optionId, description, probability, impact, riskScore, optional category and mitigation\n- ReversibilityData schema with optionId, reversibilityScore, undoCost, timeToReverse, doorType, optional undoComplexity and reversibilityNotes\n- TimeHorizonRegret schema with tenMinutes, tenMonths, tenYears\n- RegretMinimizationData schema with optionId, futureSelfPerspective, potentialRegrets, optional regretScore and timeHorizonAnalysis\n- DecisionFrameworkData schema with all required fields (decisionStatement, options, analysisType, stage, decisionId, iteration, nextStageNeeded) and optional fields (criteria, stakeholders, constraints, timeHorizon, riskTolerance, possibleOutcomes, recommendation, rationale, eisenhowerClassification, costBenefitAnalysis, riskAssessment, reversibilityAnalysis, regretMinimizationAnalysis)\n\nAll schemas use common schemas for consistency and include comprehensive documentation. Follows the same pattern as council.ts schema.",
          "updated_at": "2026-01-06T20:02:02.270859+00:00"
        },
        {
          "id": "2.3",
          "title": "Create schema for ArgumentData (debate tool)",
          "description": "Create Zod schema for ArgumentData with argument types enum",
          "status": "pending",
          "files": [
            "src/schemas/debate.ts"
          ],
          "estimatedMinutes": 15
        },
        {
          "id": "2.4",
          "title": "Create schema for MetacognitiveMonitoringData (reflect tool)",
          "description": "Create Zod schemas for KnowledgeAssessment, ClaimAssessment, ReasoningAssessment, and MetacognitiveMonitoringData",
          "status": "pending",
          "files": [
            "src/schemas/reflect.ts"
          ],
          "estimatedMinutes": 20
        },
        {
          "id": "2.5",
          "title": "Create schema for ScientificInquiryData (hypothesis tool)",
          "description": "Create Zod schemas for Variable, HypothesisData, Prediction, ExperimentData, and ScientificInquiryData",
          "status": "pending",
          "files": [
            "src/schemas/hypothesis.ts"
          ],
          "estimatedMinutes": 25
        },
        {
          "id": "2.6",
          "title": "Create schema for VisualOperationData (map tool)",
          "description": "Create Zod schemas for VisualElement and VisualOperationData",
          "status": "pending",
          "files": [
            "src/schemas/map.ts"
          ],
          "estimatedMinutes": 15
        },
        {
          "id": "2.7",
          "title": "Create schema index with exports",
          "description": "Create src/schemas/index.ts that exports all schemas for easy import",
          "status": "pending",
          "files": [
            "src/schemas/index.ts"
          ],
          "estimatedMinutes": 5
        }
      ]
    },
    {
      "id": "phase-3",
      "name": "Integrate Zod Schemas into Servers",
      "description": "Replace manual validation methods with Zod schema parsing in each server",
      "subtasks": [
        {
          "id": "3.1",
          "title": "Update traceServer.ts to use Zod",
          "description": "Replace validateThoughtData method with Zod schema.parse(), update error handling",
          "status": "pending",
          "files": [
            "src/tools/traceServer.ts"
          ],
          "estimatedMinutes": 15
        },
        {
          "id": "3.2",
          "title": "Update modelServer.ts to use Zod",
          "description": "Replace validateModelData method with Zod schema.parse(), update error handling",
          "status": "pending",
          "files": [
            "src/tools/modelServer.ts"
          ],
          "estimatedMinutes": 15
        },
        {
          "id": "3.3",
          "title": "Update debugServer.ts to use Zod",
          "description": "Replace validateApproachData method with Zod schema.parse()",
          "status": "pending",
          "files": [
            "src/tools/debugServer.ts"
          ],
          "estimatedMinutes": 15
        },
        {
          "id": "3.4",
          "title": "Update patternServer.ts to use Zod",
          "description": "Replace validatePatternData method with Zod schema.parse()",
          "status": "pending",
          "files": [
            "src/tools/patternServer.ts"
          ],
          "estimatedMinutes": 15
        },
        {
          "id": "3.5",
          "title": "Update paradigmServer.ts to use Zod",
          "description": "Replace validateParadigmData method with Zod schema.parse()",
          "status": "pending",
          "files": [
            "src/tools/paradigmServer.ts"
          ],
          "estimatedMinutes": 15
        },
        {
          "id": "3.6",
          "title": "Update councilServer.ts to use Zod",
          "description": "Replace validateInputData method with Zod schema.parse(), preserve persona resolution logic",
          "status": "pending",
          "files": [
            "src/tools/councilServer.ts"
          ],
          "estimatedMinutes": 20
        },
        {
          "id": "3.7",
          "title": "Update decideServer.ts to use Zod",
          "description": "Replace validateInputData method with Zod schema.parse()",
          "status": "pending",
          "files": [
            "src/tools/decideServer.ts"
          ],
          "estimatedMinutes": 15
        },
        {
          "id": "3.8",
          "title": "Update debateServer.ts to use Zod",
          "description": "Replace validateInputData method with Zod schema.parse()",
          "status": "pending",
          "files": [
            "src/tools/debateServer.ts"
          ],
          "estimatedMinutes": 15
        },
        {
          "id": "3.9",
          "title": "Update reflectServer.ts to use Zod",
          "description": "Replace validateInputData method with Zod schema.parse()",
          "status": "pending",
          "files": [
            "src/tools/reflectServer.ts"
          ],
          "estimatedMinutes": 15
        },
        {
          "id": "3.10",
          "title": "Update hypothesisServer.ts to use Zod",
          "description": "Replace validateInputData method with Zod schema.parse()",
          "status": "pending",
          "files": [
            "src/tools/hypothesisServer.ts"
          ],
          "estimatedMinutes": 15
        },
        {
          "id": "3.11",
          "title": "Update mapServer.ts to use Zod",
          "description": "Replace validateInputData method with Zod schema.parse()",
          "status": "pending",
          "files": [
            "src/tools/mapServer.ts"
          ],
          "estimatedMinutes": 15
        }
      ]
    },
    {
      "id": "phase-4",
      "name": "Testing and Verification",
      "description": "Ensure all existing tests pass and add schema-specific tests",
      "subtasks": [
        {
          "id": "4.1",
          "title": "Create schema unit tests",
          "description": "Create src/schemas/schemas.test.ts with tests for valid and invalid inputs for each schema",
          "status": "pending",
          "files": [
            "src/schemas/schemas.test.ts"
          ],
          "estimatedMinutes": 30
        },
        {
          "id": "4.2",
          "title": "Run existing tests and fix any regressions",
          "description": "Run vitest to ensure all existing server tests still pass, fix any issues",
          "status": "pending",
          "files": [],
          "estimatedMinutes": 20
        },
        {
          "id": "4.3",
          "title": "Build verification",
          "description": "Run TypeScript build to ensure no type errors",
          "status": "pending",
          "files": [],
          "estimatedMinutes": 10
        }
      ]
    }
  ],
  "summary": {
    "totalPhases": 4,
    "totalSubtasks": 24,
    "estimatedTotalMinutes": 365,
    "keyFiles": [
      "src/schemas/common.ts",
      "src/schemas/trace.ts",
      "src/schemas/model.ts",
      "src/schemas/debug.ts",
      "src/schemas/pattern.ts",
      "src/schemas/paradigm.ts",
      "src/schemas/council.ts",
      "src/schemas/decide.ts",
      "src/schemas/debate.ts",
      "src/schemas/reflect.ts",
      "src/schemas/hypothesis.ts",
      "src/schemas/map.ts",
      "src/schemas/index.ts",
      "src/schemas/schemas.test.ts"
    ]
  },
  "qaSignOff": {
    "status": "not-started",
    "issues": "",
    "testsPassed": ""
  },
  "final_acceptance": [],
  "last_updated": "2026-01-06T20:02:02.270869+00:00"
}